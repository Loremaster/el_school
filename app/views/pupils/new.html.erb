<legend>Создание ученика</legend>

<%= form_for @pupil, :html => {:class => "form-horizontal"} do |f| %>
  <%= field_set_tag do %>
    <div class="control-group">
      <%= f.label :pupil_last_name, "Фамилия", :class => "control-label" %>      
      
      <div class="controls">
        <%= f.text_field :pupil_last_name, :placeholder => @everpresent_field_placeholder,
                         :value => @last_name %>
      </div>
    </div>
    
    <div class="control-group">
      <%= f.label :pupil_first_name, "Имя", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_field :pupil_first_name, :placeholder => @everpresent_field_placeholder,
                         :value => @first_name %>
      </div>
    </div>
    
    <div class="control-group">
      <%= f.label :pupil_middle_name, "Отчество", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_field :pupil_middle_name, :placeholder => @everpresent_field_placeholder,
                         :value => @middle_name %>
      </div>
    </div>
    
    <div class="control-group">
      <%= f.label :pupil_sex, "Пол", :class => "control-label" %>
      
      <div class="controls">
        <%= label_tag nil, nil, :class => "radio" do %>
          <%= f.radio_button :pupil_sex, 'm', :checked => @pupil_sex_man %>
          Мужской
        <% end %>
      
        <%= label_tag nil, nil, :class => "radio" do %>
          <%= f.radio_button :pupil_sex, 'w', :checked => @pupil_sex_woman %>
          Женский
        <% end %>
      </div>
    </div>
    
    <div class="control-group">
      <%= f.label :pupil_birthday, "Дата рождения", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_field :pupil_birthday, :placeholder => @everpresent_field_placeholder,
                         :value => @birthday %>
      </div>
    </div>
    
    <hr/>
    
    <div class="control-group">
      <%= f.label :pupil_nationality, "Национальность", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_field :pupil_nationality, :placeholder => @everpresent_field_placeholder,
                         :value => @nationality %>
      </div>
    </div>
    
    <hr/>
    
    <div class="control-group">
      <%= f.label :pupil_address_of_registration, "Адрес прописки", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_area :pupil_address_of_registration, :rows => 3, 
                        :placeholder => @everpresent_field_placeholder,
                        :value => @registration %>
      </div>
    </div>
    
    <div class="control-group">
      <%= f.label :pupil_address_of_living, "Адрес проживания", :class => "control-label" %>
      
      <div class="controls">
        <%= f.text_area :pupil_address_of_living, :rows => 3, 
                        :placeholder => @everpresent_field_placeholder,
                        :value => @living %>
      </div>
    </div>
    
    <hr/>
    
    <%= f.fields_for :pupil_phone, @pupil_phone do |pp| %>                                <%# This shows fields. @pupil_phone add _attributes as i understand. %>
      <div class="control-group">
        <%= pp.label :pupil_home_number, "Домашний телефон", :class => "control-label" %> 
        
        <div class="controls">
          <%= pp.text_field :pupil_home_number, :placeholder => @everpresent_field_placeholder,
                            :value => @home_phone %>
        </div>
      </div>
      
      <div class="control-group">
        <%= pp.label :pupil_mobile_number, "Мобильный телефон", :class => "control-label" %> 
        
        <div class="controls">
          <%= pp.text_field :pupil_mobile_number, :placeholder => @everpresent_field_placeholder,
                            :value => @mobile_phone %>
        </div>
      </div>   
    <% end %>
    
    <hr/>
        
    <%= f.fields_for :user, @user do |builder| %>                                         <%# Adding @user allows us to send user_params for belongs_to model. %>
      <%= render :partial => 'shared/user_fields_new', 
          :locals => { :f => builder,
                       :field_placeholder => @everpresent_field_placeholder,
                       :login => @login,
                       :password => @password,
                       :login_field_id => "pupil_user_attributes_user_login",
                       :password_field_id => "pupil_user_attributes_password" 
                      }
      %>
    <% end %>

    <%= f.submit "Создать", :class => "btn btn-large btn-success" %>
  <% end %>  
<% end %>  